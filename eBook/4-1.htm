<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="4-1.files/filelist.xml">
<link rel=Edit-Time-Data href="4-1.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>实验4 并发与调度</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Zhou Su</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Billgates</o:LastAuthor>
  <o:Revision>11</o:Revision>
  <o:TotalTime>89</o:TotalTime>
  <o:LastPrinted>2003-05-27T04:09:00Z</o:LastPrinted>
  <o:Created>2003-07-13T22:24:00Z</o:Created>
  <o:LastSaved>2003-07-15T11:33:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1786</o:Words>
  <o:Characters>10183</o:Characters>
  <o:Company>Zx co.</o:Company>
  <o:Lines>84</o:Lines>
  <o:Paragraphs>23</o:Paragraphs>
  <o:CharactersWithSpaces>11946</o:CharactersWithSpaces>
  <o:Version>10.3501</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>110</w:Zoom>
  <w:HideSpellingErrors/>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridHorizontalSpacing>0.1 磅</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>0.15 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimHei;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:楷体_GB2312;
	panose-1:2 1 6 9 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
@font-face
	{font-family:"\@楷体_GB2312";
	panose-1:2 1 6 9 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:1 135135232 16 0 262144 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-next:正文;
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	text-align:center;
	line-height:240%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:15.0pt;
	mso-bidi-font-size:22.0pt;
	font-family:黑体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:22.0pt;}
h2
	{mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:170%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:12.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:黑体;
	mso-hansi-font-family:Arial;
	mso-bidi-font-family:宋体;
	mso-font-kerning:1.0pt;}
h3
	{mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:170%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:10.5pt;
	mso-bidi-font-size:16.0pt;
	font-family:黑体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:1.0pt;}
h4
	{mso-style-next:正文;
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:155%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:10.5pt;
	mso-bidi-font-size:14.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	text-transform:uppercase;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.5pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	font-variant:small-caps;
	mso-font-kerning:1.0pt;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:31.5pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:52.5pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:73.5pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{mso-style-update:auto;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	border:none;
	mso-border-bottom-alt:solid windowtext .75pt;
	padding:0cm;
	mso-padding-alt:0cm 0cm 1.0pt 0cm;
	font-size:9.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	background:navy;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:宋体;
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";
	mso-font-kerning:1.0pt;}
p.a, li.a, div.a
	{mso-style-name:图表标题;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:none;
	font-size:9.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:黑体;
	mso-hansi-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-facing-pages:yes;}
@page Section1
	{size:515.95pt 728.6pt;
	margin:92.15pt 2.0cm 92.15pt 76.55pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-page-numbers:83;
	mso-title-page:yes;
	mso-even-header:url("4-1.files/header.htm") eh1;
	mso-header:url("4-1.files/header.htm") h1;
	mso-first-header:url("4-1.files/header.htm") fh1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1234511461;
	mso-list-type:hybrid;
	mso-list-template-ids:1205218842 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050">
  <o:colormenu v:ext="edit" fillcolor="none" strokecolor="none"/>
 </o:shapedefaults></xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
  <o:regrouptable v:ext="edit">
   <o:entry new="1" old="0"/>
   <o:entry new="2" old="0"/>
   <o:entry new="3" old="0"/>
   <o:entry new="4" old="0"/>
   <o:entry new="5" old="0"/>
   <o:entry new="6" old="0"/>
   <o:entry new="7" old="0"/>
   <o:entry new="8" old="0"/>
   <o:entry new="9" old="0"/>
   <o:entry new="10" old="0"/>
   <o:entry new="11" old="10"/>
   <o:entry new="12" old="11"/>
   <o:entry new="13" old="12"/>
   <o:entry new="14" old="12"/>
   <o:entry new="15" old="12"/>
   <o:entry new="16" old="0"/>
   <o:entry new="17" old="0"/>
   <o:entry new="18" old="17"/>
   <o:entry new="19" old="18"/>
   <o:entry new="20" old="19"/>
   <o:entry new="21" old="20"/>
   <o:entry new="22" old="21"/>
   <o:entry new="23" old="22"/>
   <o:entry new="24" old="23"/>
   <o:entry new="25" old="24"/>
   <o:entry new="26" old="0"/>
  </o:regrouptable>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN link=blue vlink=purple style='tab-interval:21.0pt;text-justify-trim:
punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal align=right style='text-align:right'><a name="_top"></a><b><span
style='font-size:26.0pt;mso-bidi-font-size:12.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman";color:#993366'>实验</span></b><b><i
style='mso-bidi-font-style:normal'><span lang=EN-US style='font-size:55.0pt;
mso-bidi-font-size:12.0pt;color:#993366'>4</span></i><span lang=EN-US
style='color:#993366'><o:p></o:p></span></b></p>

<p class=MsoNormal align=right style='text-align:right;word-break:break-all'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_s1609" type="#_x0000_t75" style='position:absolute;
 left:0;text-align:left;margin-left:0;margin-top:0;width:546.85pt;height:34.15pt;
 z-index:-1;mso-wrap-edited:f;mso-position-horizontal:left;
 mso-position-vertical:top;mso-position-vertical-relative:line' wrapcoords="-26 0 -26 21176 21600 21176 21600 0 -26 0"
 o:allowoverlap="f">
 <v:imagedata src="4-1.files/image001.jpg" o:title="image_bk"/>
 <w:wrap type="square" anchorx="page"/>
</v:shape><![endif]--><![if !vml]><img width=729 height=46
src="4-1.files/image002.jpg" align=left hspace=12 v:shapes="_x0000_s1609"><![endif]><b><span
style='font-size:24.0pt;mso-bidi-font-size:12.0pt;font-family:黑体;mso-ascii-font-family:
"Times New Roman";color:navy'>并发与调度</span></b><b><span lang=EN-US
style='font-size:16.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:黑体;
color:navy'><span style='mso-spacerun:yes'>&nbsp; </span></span></b></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc16587483"></a><a name="_Toc36437026"></a><a name="_Toc37925076"></a><a
name="_Toc45704105"><span style='mso-bookmark:_Toc37925076'><span
style='mso-bookmark:_Toc36437026'><span style='mso-bookmark:_Toc16587483'><span
lang=EN-US>4.1<span style='mso-spacerun:yes'>&nbsp; </span>Windows 2000线程同步</span></span></span></span></a><span
style='mso-bookmark:_Toc16587483'></span></h2>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span lang=EN-US>(</span></span><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>实验估计时间：</span><span
lang=EN-US>120</span></span><span style='mso-bookmark:_Toc16587483'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>分钟</span><span lang=EN-US>)</span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span lang=EN-US>&nbsp;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 21.0pt'><span style='mso-bookmark:_Toc16587483'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-bidi-font-weight:bold'><span
style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]></span><a href="#_背景知识"><span style='mso-bookmark:
_Toc16587483'><b><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>背景知识</span></b></span><span
style='mso-bookmark:_Toc16587483'></span></a><span style='mso-bookmark:_Toc16587483'><b><span
lang=EN-US><o:p></o:p></span></b></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 21.0pt'><span style='mso-bookmark:_Toc16587483'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-bidi-font-weight:bold'><span
style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]></span><a href="#_实验目的"><span style='mso-bookmark:
_Toc16587483'><b><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>实验目的</span></b></span><span
style='mso-bookmark:_Toc16587483'></span></a><span style='mso-bookmark:_Toc16587483'><b><span
lang=EN-US><o:p></o:p></span></b></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 21.0pt'><span style='mso-bookmark:_Toc16587483'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-bidi-font-weight:bold'><span
style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]></span><a href="#_工具/准备工作"><span
style='mso-bookmark:_Toc16587483'><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>工具</span><span
lang=EN-US>/</span></b></span><span style='mso-bookmark:_Toc16587483'><b><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>准备工作</span></b></span><span style='mso-bookmark:_Toc16587483'></span></a><span
style='mso-bookmark:_Toc16587483'><b><span lang=EN-US><o:p></o:p></span></b></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt;mso-list:l0 level1 lfo2;
tab-stops:list 21.0pt'><span style='mso-bookmark:_Toc16587483'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-bidi-font-weight:bold'><span
style='mso-list:Ignore'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]></span><a href="#_实验内容与步骤"><span
style='mso-bookmark:_Toc16587483'><b><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>实验内容与步骤</span></b></span><span
style='mso-bookmark:_Toc16587483'></span></a><span style='mso-bookmark:_Toc16587483'><b><span
lang=EN-US><o:p></o:p></span></b></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span lang=EN-US>&nbsp;</span></span></p>

<h3><span style='mso-bookmark:_Toc16587483'><a name="_Toc36437027"></a><a
name="_Toc37925077"></a><a name="_Toc45704106"></a><a name="_背景知识"></a><span
style='mso-bookmark:_Toc36437027'><span style='mso-bookmark:_Toc37925077'><span
style='mso-bookmark:_Toc45704106'>背景知识</span></span></span></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><a name="_Toc36437028"><span lang=EN-US>Windows
2000</span></a></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437028'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>提供的常用对象可分成三类：核心应用服务、线程同步和线程间通讯。其中，开发人员可以使用线程同步对象来协调线程和进程的工作，以使其共享信息并执行任务。此类对象包括互锁数据、临界段、事件、互斥体和信号等。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>多线程编程中关键的一步是保护所有的共享资源，工具主要有互锁函数、临界段和互斥体等；另一个实质性部分是协调线程使其完成应用程序的任务，为此，可利用内核中的事件对象和信号。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在进程内<span class=GramE>或进程</span>间实现线程同步的最方便的方法是使用事件对象，这一组内核对象允许一个线程对其<span
class=GramE>受信状态</span>进行直接控制</span><span lang=EN-US> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>见表</span><span lang=EN-US>4-1) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-ansi-language:FR'>而</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
class=GramE><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>互斥体则是</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>另一个可命名且安全的内核对象，其主要目的是引导对共享资源的访问。拥有单一访问资源的线程创建互斥体，所有想要访问该资源的线程应该在实际执行操作之前获得互斥体，而在访问结束时立即释放互斥体，以允许下一个等待线程获得互斥体，然后接着进行下去。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>与事件对象类似，互斥体容易创建、打开、使用并清除。利用</span><span class=SpellE><span
lang=EN-US>CreateMutex</span></span><span lang=EN-US>() API</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>可创建互斥体，创建时还可以指定一个初始的拥有权标志，通过使用这个标志，只有当线程完成了资源的所有的初始化工作时，才允许创建线程释放互斥体。</span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437028'><span lang=EN-US>&nbsp;</span></span></span></p>

<p class=a><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:
_Toc36437028'>表<span lang=EN-US>4-1 用于管理事件对象的API</span></span></span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.2pt;border-collapse:collapse;border:none;mso-border-top-alt:
 solid windowtext 1.5pt;mso-border-bottom-alt:solid windowtext 1.5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:solid windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext 1.5pt;mso-border-bottom-alt:solid windowtext .5pt;
  mso-border-right-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:17.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt;font-family:黑体'>API名称<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border-top:solid windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext 1.5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-bottom-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  style='font-size:9.0pt;font-family:黑体'>描述<span lang=EN-US><o:p></o:p></span></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
 <tr style='mso-yfti-irow:1;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal style='text-indent:4.5pt;mso-char-indent-count:.5;
  mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span lang=EN-US style='font-size:9.0pt'>CreateEvent()<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border:none;border-bottom:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:17.0pt'>
  <p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span style='font-size:9.0pt;font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在内核中创建一个新的事件对象。此函数允许有安全性设置、手工还是自动重置的标志以及初始时已接受还是未接受信号状态的标志</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
 <tr style='mso-yfti-irow:2;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal style='text-indent:4.5pt;mso-char-indent-count:.5;
  mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span lang=EN-US style='font-size:9.0pt'>OpenEvent()<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border:none;border-bottom:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:17.0pt'>
  <p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span style='font-size:9.0pt;font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建对已经存在的事件对象的引用。此</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt'>API</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
  mso-hansi-font-family:"Times New Roman"'>函数需要名称、继承标志和所需的访问级别</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
 <tr style='mso-yfti-irow:3;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal style='text-indent:4.5pt;mso-char-indent-count:.5;
  mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span lang=EN-US style='font-size:9.0pt'>SetEvent()<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border:none;border-bottom:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:17.0pt'>
  <p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span style='font-size:9.0pt;font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将手工重置事件转化为已接受信号状态</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
 <tr style='mso-yfti-irow:4;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal style='text-indent:4.5pt;mso-char-indent-count:.5;
  mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span lang=EN-US style='font-size:9.0pt'>ResetEvent()<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border:none;border-bottom:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt;
  height:17.0pt'>
  <p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span style='font-size:9.0pt;font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将手工重置事件转化为<span
  class=GramE>非接受</span>信号状态</span></span></span><span style='mso-bookmark:
  _Toc16587483'><span style='mso-bookmark:_Toc36437028'><span lang=EN-US
  style='font-size:9.0pt'><o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes;height:17.0pt'>
  <td width=125 style='width:93.7pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-bottom-alt:solid windowtext 1.5pt;mso-border-right-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal style='text-indent:4.5pt;mso-char-indent-count:.5;
  mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span lang=EN-US style='font-size:9.0pt'>PulseEvent()<o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
  <td width=385 style='width:288.8pt;border:none;border-bottom:solid windowtext 1.5pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:17.0pt'>
  <p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
  style='mso-bookmark:_Toc36437028'><span style='font-size:9.0pt;font-family:
  宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将自动重置事件对象转化为已接受信号状态。当系统释放所有的等待它的线程时此种转化立即发生</span></span></span><span
  style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
  lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>
  </td>
  <span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span>
 </tr>
</table>

</div>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437028'><span lang=FR style='mso-ansi-language:FR'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>为了获得互斥体，首先，想要访问调用的线程可使用</span><span class=SpellE><span
lang=EN-US>OpenMutex</span></span><span lang=EN-US>() API</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>来获得指向对象的句柄；然后，线程将这个句柄提供给一个等待函数。当内核将互斥体对象发送给等待线程时，就表明该线程获得了互斥体的拥有权。当线程获得拥有权时，线程控制了对共享资源的访问――必须设法尽快地放弃互斥体。放弃共享资源时需要在该对象上调用</span><span
lang=EN-US>ReleaseMute() API</span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。然后系统负责将互斥<span
class=GramE>体拥有</span>权传递给下一个等待着的线程</span><span lang=EN-US> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>由到达时间决定顺序</span><span lang=EN-US>) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></span></span><a href="#_top"><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><span
lang=EN-US style='text-decoration:none;text-underline:none'><!--[if gte vml 1]><v:shape
 id="_x0000_i1025" type="#_x0000_t75" style='width:45pt;height:17.25pt'>
 <v:imagedata src="4-1.files/image003.gif" o:title="02"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=60 height=23
src="4-1.files/image003.gif" v:shapes="_x0000_i1025"><![endif]></span></span></span></a><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'></span></span></p>

<h3><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437028'><a
name="_Toc37925078"></a><a name="_Toc45704107"></a><a name="_实验目的"></a><span
style='mso-bookmark:_Toc37925078'><span style='mso-bookmark:_Toc45704107'>实验目的</span></span></span></span></h3>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><a
name="_Toc36437029"><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>在本实验中，通过对事件和互斥体对象的了解，来加深对</span><span
lang=EN-US>Windows 2000</span></a></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>线程同步的理解。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>1) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>回顾系统进程、线程的有关概念，加深对</span><span lang=EN-US>Windows 2000</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>线程的理解。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>2) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>了解事件和互斥体对象。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>3) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>通过分析实验程序，了解管理事件对象的</span><span lang=EN-US>API</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>4) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>了解在进程中如何使用事件对象。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>5) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>了解在进程中如何使用互斥体对象。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437029'><span lang=EN-US>6) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>了解<span class=GramE>父进程创建子进程</span>的程序设计方法。</span></span></span><a
href="#_top"><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:
_Toc36437029'><span lang=EN-US style='text-decoration:none;text-underline:none'><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:45pt;height:17.25pt'>
 <v:imagedata src="4-1.files/image003.gif" o:title="02"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=60 height=23
src="4-1.files/image003.gif" v:shapes="_x0000_i1026"><![endif]></span></span></span></a><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'></span></span></p>

<h3><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437029'><a
name="_Toc37925079"></a><a name="_Toc45704108"></a><a name="_工具/准备工作"></a><span
style='mso-bookmark:_Toc37925079'><span style='mso-bookmark:_Toc45704108'>工具<span
lang=EN-US>/准备工作</span></span></span></span></span></h3>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在开始本实验之前，请回顾教科书的相关内容。</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>您需要做以下准备：</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span lang=EN-US>1) </span></span><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>一台运行</span><span
lang=EN-US>Windows 2000 Professional</span></span><span style='mso-bookmark:
_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>操作系统的计算机。</span><a name="_Toc36437030"></a><a
name="_Toc37925080"><span style='mso-bookmark:_Toc36437030'></span></a></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc37925080'><span
style='mso-bookmark:_Toc36437030'><span lang=EN-US>2) </span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc37925080'><span
style='mso-bookmark:_Toc36437030'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>计算机中需安装</span><span
lang=EN-US>Visual C++ 6.0</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc37925080'><span style='mso-bookmark:
_Toc36437030'><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>专业版或企业版。</span></span></span></span><a
href="#_top"><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:
_Toc37925080'><span style='mso-bookmark:_Toc36437030'><span lang=EN-US
style='text-decoration:none;text-underline:none'><!--[if gte vml 1]><v:shape
 id="_x0000_i1027" type="#_x0000_t75" style='width:45pt;height:17.25pt'>
 <v:imagedata src="4-1.files/image003.gif" o:title="02"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=60 height=23
src="4-1.files/image003.gif" v:shapes="_x0000_i1027"><![endif]></span></span></span></span></a><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc37925080'><span
style='mso-bookmark:_Toc36437030'></span></span></span></p>

<h3><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc37925080'><span
style='mso-bookmark:_Toc36437030'><a name="_Toc45704109"></a><a name="_实验内容与步骤"></a><span
style='mso-bookmark:_Toc45704109'>实验内容与步骤</span></span></span></span></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span lang=EN-US>&nbsp;</span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'></span><a
href="#_1._事件对象"><span style='mso-bookmark:_Toc16587483'><span lang=EN-US>1. </span></span><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>事件对象</span></span><span
style='mso-bookmark:_Toc16587483'></span></a><span style='mso-bookmark:_Toc16587483'></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'></span><a
href="#_2._互斥体对象"><span style='mso-bookmark:_Toc16587483'><span lang=EN-US>2. </span></span><span
style='mso-bookmark:_Toc16587483'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>互斥体对象</span></span><span
style='mso-bookmark:_Toc16587483'></span></a><span style='mso-bookmark:_Toc16587483'></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span lang=EN-US><o:p>&nbsp;</o:p></span></span></p>

<h4><span style='mso-bookmark:_Toc16587483'><a name="_Toc36437031"></a><a
name="_1._事件对象"></a><span style='mso-bookmark:_Toc36437031'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>1. 事件对象</span></span></span></h4>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>清单</span><span
lang=EN-US>4-1</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>程序展示了如何在进程<span
class=GramE>间使用</span>事件。<span class=GramE>父进程</span>启动时，利用</span><span
lang=EN-US>CreateEvent() API</span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建一个命名的、可共享的事件和<span
class=GramE>子进程</span>，然后等待<span class=GramE>子进程向事件</span>发出信号并终止<span
class=GramE>父进程</span>。在创建时，<span class=GramE>子进程</span>通过</span><span
lang=EN-US>OpenEvent() API</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>打开事件对象，调用</span><span
lang=EN-US>SetEvent() API</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>使其转化为已接受信号状态。两个进程在发出信号之后几乎立即终止。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>1</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：登录进入</span><span
lang=EN-US>Windows 2000 Professional</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>2</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：在“开始”菜单中单击“程序”</span><span
lang=EN-US>-</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>“</span><span
lang=EN-US>Microsoft Visual Studio 6.0</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”</span><span lang=EN-US>C</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>“</span><span lang=EN-US>Microsoft Visual C++ 6.0</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”命令，进入</span><span lang=EN-US>Visual C++</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>窗口。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>3</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在工具栏单击“打开”按钮，在“打开”对话框中找到并打开实验源程序</span><span lang=EN-US>4-1.cpp</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
黑体'>清单<span lang=EN-US>4-1<span style='mso-spacerun:yes'>&nbsp; </span>创建和打开事件对象在进程间传送信号<o:p></o:p></span></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>//
event</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>项目</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>#
include &lt;windows.h&gt;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>#
include &lt;iostream&gt;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>以下是句柄事件。实际中很可能使用共享的包含文件来进行通讯</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>static</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> LPCTSTR g_szContinueEvent =
&quot;w2kdg.EventDemo.event.Continue&quot;;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
class=GramE><span style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>本方法</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>只是创建了一个进程的副本，<span class=GramE>以子进程</span>模式</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>由命令行指定</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>工作</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>BOOL
<span class=GramE>CreateChild()</span><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>提取当前可执行文件的文件名</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>TCHAR <span
class=GramE>szFilename[</span>MAX_PATH] ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>:: <span
class=GramE>GetModuleFileName(</span>NULL, szFilename, MAX_PATH) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>格式化用于<span class=GramE>子进程</span>的命令行，指明它是一个</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>EXE</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>文件和子进程</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TCHAR <span
class=GramE>szCmdLine[</span>MAX_PATH] ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>::</span> sprintf(szCmdLine,
&quot;\&quot;%s\&quot;child&quot; , szFilename) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span style='font-size:
9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>子进程</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span style='font-size:
9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的启动信息结构</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>STARTUPINFO si;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>:: <span
class=GramE>ZeroMemory(</span>reinterpret_cast&lt;void*&gt;(&amp;si),
sizeof(si)) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>si.cb =
sizeof(si);<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>必须是本结构的大小</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>返回的<span class=GramE>子进程</span>的进程信息结构</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>PROCESS_INFORMATION pi;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>使用同一可执行文件和告诉它是一个子进程的命令行创建进程</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>BOOL bCreateOK <span class=GramE>= :</span>: CreateProcess(<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>szFilename,<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>生成的可执行文件名</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>szCmdLine,<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>指示其行为与<span
class=GramE>子进程</span>一样的标志</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span style='font-size:
9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>子进程</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span style='font-size:
9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>句柄的安全性</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>子线程句柄的安全性</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FALSE,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>不继承句柄</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,<span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>特殊的创建标志</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>新环境</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>当前目录</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&amp;si,<span style='mso-tab-count:5'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>启动信息结构</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&amp;pi ) ;<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>返回的进程信息结构</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>释放对子进程的引用</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (bCreateOK)<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>pi.hProcess);<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>pi.hThread);<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return(</span>bCreateOK) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>下面的方法创建一个事件和<span class=GramE>一</span>个子进程，然后等待<span
class=GramE>子进程</span>在返回前<span class=GramE>向事件</span>发出信号</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>void</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US
style='font-size:9.0pt'> WaitForChild()<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// create a new
event object for the child process<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// to use when
releasing this process<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>HANDLE
hEventContinue <span class=GramE>= :</span>: CreateEvent(<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省的安全性，<span
class=GramE>子进程</span>将具有访问权限</span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US
style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>TRUE,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>手工重置事件</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FALSE,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>初始时是非接受信号状态</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>g_szContinueEvent);<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>事件名称</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span class=GramE>if</span>
(hEventContinue!=NULL)<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:45.0pt;mso-char-indent-count:5.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=GramE>std
:</span>: cout &lt;&lt; &quot;event created &quot; &lt;&lt; std :: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>创建子进程</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (:: CreateChild())<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>std :</span>: cout &lt;&lt; &quot; chlid created&quot;
&lt;&lt; std :: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>等待，直到<span
class=GramE>子进程</span>发出信号</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>std :</span>: cout &lt;&lt; &quot;Parent waiting on
child.&quot; &lt;&lt; <span class=GramE>std :</span>: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>WaitForSingleObject(</span>hEventContinue,
INFINITE);<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: Sleep(1500);<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>删去这句试试</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span class=GramE>std :</span>:
cout &lt;&lt; &quot;parent received the envent signaling from child&quot;
&lt;&lt; std :: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>清除句柄</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>hEventContinue);<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>hEventContinue</span> = INVALID_HANDLE_VALUE;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>以下方法在<span class=GramE>子进程</span>模式下被调用，其功能只是<span
class=GramE>向父进程</span>发出终止信号</span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US
style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>void</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US
style='font-size:9.0pt'> SignalParent()<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;</span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>尝试打开句柄</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=GramE>std
:</span>: cout &lt;&lt; &quot;child process begining......&quot; &lt;&lt; std
:: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>HANDLE
hEventContinue <span class=GramE>= :</span>: OpenEvent(<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>EVENT_MODIFY_STATE,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>所要求的最小访问权限</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>FALSE,<span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>不是可继承的句柄</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>g_szContinueEvent);<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span style='mso-tab-count:
1'> </span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>事件名称</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (hEventContinue != NULL)<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>SetEvent(</span>hEventContinue);<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>std :</span>: cout &lt;&lt; &quot;event signaled&quot; &lt;&lt; std
:: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>清除句柄</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>:: <span
class=GramE>CloseHandle(</span>hEventContinue) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>hEventContinue</span> = INVALID_HANDLE_VALUE;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>int</span></span></span></span><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US
style='font-size:9.0pt'> main(int argc, char* argv[] )<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>检查<span class=GramE>父进程或是子进程</span>是否启动</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (argc&gt;1 &amp;&amp; :: strcmp(argv[1] ,
&quot;child&quot; )== 0)<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
class=GramE><span style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>向父进程</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>创建的事件发出信号</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>SignalParent(</span>) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span class=GramE>else</span><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:1'> </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建一个事件并等待<span
class=GramE>子进程</span>发出信号</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>WaitForChild(</span>) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>:: <span class=GramE>Sleep(</span>1500)
;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>std :</span>: cout &lt;&lt; &quot;Parent
released.&quot; &lt;&lt; <span class=GramE>std :</span>: endl ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>return</span> 0;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.1pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>4</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>单击“</span><span lang=EN-US>Build</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”菜单中的“</span><span lang=EN-US>Compile 4-1.cpp</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”命令，并单击“是”按钮确认。系统对</span><span lang=EN-US>4-1.cpp</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>进行编译。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.1pt;mso-char-indent-count:2.0'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span style='font-family:楷体_GB2312;
mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>5</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>编译完成后，单击“</span><span lang=EN-US>Build</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”菜单中的“</span><span lang=EN-US>Build 4-1.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”命令，建立</span><span lang=EN-US>4-1.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>可执行文件。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>操作能否正常进行？如果不行，则可能的原因是什么？</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>6</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在工具栏单击“</span><span lang=EN-US>Execute Program</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”</span><span lang=EN-US> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>执行程序</span><span lang=EN-US>) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>按钮，执行</span><span lang=EN-US>4-1.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>程序。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>运行结果</span><span
lang=EN-US> (</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分行书写。如果运行不成功，则可能的原因是什么？</span><span
lang=EN-US>) </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：</span><span
lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>1)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>2)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>3)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>4)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>5)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>6)
__________________________________________________________________<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0;
mso-char-indent-size:10.5pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>这个结果与你期望的一致吗？</span><span
lang=EN-US>(</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span style='font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>从进程</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>并发的角度对结果进行分析</span><span lang=EN-US>)</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>阅读和分析程序</span><span
lang=EN-US>4-1</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，请回答：</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>1) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>程序中，创建一个事件使用了哪一个系统函数？创建时设置的初始信号状态是什么？</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>a.
__________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>b.
__________________________________________________________________</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>2) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>创建一个进程</span><span lang=EN-US> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
class=GramE><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>子进程</span></span><span lang=EN-US>) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>使用了哪一个系统函数？</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>3) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>从步骤</span><span lang=EN-US>6</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>的输出结果，对照分析</span><span lang=EN-US>4-1</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>程序，可以看出程序运行的流程吗？请简单描述：</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<h4><span style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><a
name="_2._互斥体对象"></a><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>2. 互斥体对象</span></span></span></h4>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>清单</span><span
lang=EN-US>4-2</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的程序中显示的类</span><span
lang=EN-US>CCountUpDown</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>使用了一个<span
class=GramE>互斥体来保证</span>对两个线程间单一数值的访问。每个线程都企图获得控制权来改变该数值，然后将该数值写入输出流中。创建者实际上创建的是互斥体对象，计数方法执行等待并释放，为的是共同使用互斥体所需的资源</span><span
lang=EN-US> (</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>因而也就是共享资源</span><span
lang=EN-US>) </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>7</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>：在</span><span
lang=EN-US>Visual C++ </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>窗口的工具栏中单击“打开”按钮，在“打开”对话框中找到并打开实验源程序</span><span
lang=EN-US>4-2.cpp</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt;
font-family:黑体'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>清单4-2<span
style='mso-spacerun:yes'>&nbsp; </span>利用互斥<span class=GramE>体保护</span>共享资源<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// mutex</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>项目</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span># include
&lt;windows.h&gt;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span># include &lt;iostream&gt;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>利用<span class=GramE>互斥体来保护</span>同时访问的共享资源</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>class</span> CCountUpDown<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>public</span>:<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建者创建两个线程来访问共享值</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>CCountUpDown(</span>int nAccesses) :<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_<span class=GramE>hThreadlnc(</span>INVALID_HANDLE_VALUE) ,<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_<span class=GramE>hThreadDec(</span>INVALID_HANDLE_VALUE) ,<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>m_<span
class=GramE>hMutexValue(</span>INVALID_HANDLE_VALUE) ,<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=FR style='font-size:9.0pt;
mso-ansi-language:FR'>m_nValue(0) ,<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=FR style='font-size:9.0pt;
mso-ansi-language:FR'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_nAccess(nAccesses)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=FR style='font-size:9.0pt;
mso-ansi-language:FR'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>创建互斥<span
class=GramE>体用于</span>访问数值</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_hMutexValue <span class=GramE>= :</span>: CreateMutex(<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省的安全性</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>TRUE,<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>初始时拥有，在所有的初始化结束时将释放</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL) ;<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>匿名的</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_hThreadInc <span class=GramE>= :</span>: CreateThread(<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省的安全性</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省堆栈</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>IncThreadProc</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>类线程进程</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>reinterpret_cast &lt;LPVOID&gt; (this) ,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>线程参数</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>无特殊的标志</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL) ;<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>忽略返回的</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>id<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_hThreadDec <span class=GramE>= :</span>: CreateThread(<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL,<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省的安全性</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>缺省堆栈</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>DecThreadProc,<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>类线程进程</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>reinterpret_cast &lt;LPVOID&gt; (this) ,<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>线程参数</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,<span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>无特殊的标志</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>NULL) ;<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>忽略返回的</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>id<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>允许另一线程获得互斥体</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>ReleaseMutex(</span>m_hMutexValue) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>解除程序释放对对象的引用</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:45.0pt;mso-char-indent-count:5.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>virtual</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> ~CCountUpDown()<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>m_hThreadInc) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>m_hThreadDec) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>CloseHandle(</span>m_hMutexValue) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>简单的等待方法，在两个线程终止之前可暂停主调者</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>virtual</span> void WaitForCompletion()<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>确保所有对象都已准备好</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-spacerun:yes'>&nbsp;&nbsp;</span><span class=GramE>if</span>
(m_hThreadInc != INVALID_HANDLE_VALUE &amp;&amp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_<span class=GramE>hThreadDec !</span>= INVALID_HANDLE_VALUE)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>等待两者完成</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>顺序并不重要</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>WaitForSingleObject(</span>m_hThreadInc, INFINITE)
;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>WaitForSingleObject(</span>m_hThreadDec, INFINITE)
;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:36.0pt;mso-char-indent-count:4.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>protected</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>:<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>改变共享资源的简单的方法</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>virtual</span> void DoCount(int nStep)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>循环，直到所有的访问都结束为止</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>while</span> (m_nAccess &gt; 0)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>等待访问数值</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>WaitForSingleObject(</span>m_hMutexValue, INFINITE)
;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>改变并显示该值</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>m_nValue += nStep;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>std :</span>: cout &lt;&lt; “thread: ” &lt;&lt; ::
GetCurrentThreadId()<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&lt;&lt; “value<span class=GramE>: ”</span> &lt;&lt; m_nvalue<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&lt;&lt; “access<span class=GramE>: ”</span> &lt;&lt; m_nAccess &lt;&lt;
std :: endl;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>发出访问信号并允许线程切换</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>--m_nAccess;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: sleep(l000) ;<span style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>//
</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>使显示速度放慢</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>释放对数值的访问</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>:: <span class=GramE>ReleaseMutex(</span>m_hMutexValue) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>static</span> DWORD WINAPI IncThreadProc(LPVOID
lpParam)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将参数解释为</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> <span class=GramE>’</span>this<span
class=GramE>’</span> </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>指针</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CCountUpDown* pThis =<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>reinterpret_cast &lt; CCountUpDown* &gt; (lpParam<span class=GramE>) ;</span><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:49.5pt;mso-char-indent-count:5.5;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>调用对象的增加方法并返回一个值</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>pThis</span> -&gt; DoCount(+1) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return(</span>0) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>static</span> DWORD WINAPI DecThreadProc(LPVOID
lpParam)<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>// </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>将参数解释为</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'> ‘this’ </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>指针</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CCountUpDown* pThis =<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>reinterpret_cast &lt;CCountUpDown* &gt; (lpParam<span class=GramE>) ;</span><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>// </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>调用对象的减少方法并返回一个值</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'><o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>pThis</span> -&gt; DOCount(-1) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return(</span>0) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:36.0pt;mso-char-indent-count:4.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span class=GramE><span lang=EN-US
style='font-size:9.0pt'>protected</span></span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US style='font-size:9.0pt'>:<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>HANDLE m_hThreadInc;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>HANDLE m_hThreadDec;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>HANDLE m_hMutexValue;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>int</span> m_nValue;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>int</span> m_nAccess&nbsp;;<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:3.0;
mso-char-indent-size:9pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>}&nbsp;;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'>&nbsp;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>void</span> main()<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CCountUpDown <span class=GramE>ud(</span>50) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>ud.WaitForCompletion(</span>) ;<o:p></o:p></span></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US style='font-size:9.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>8</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>单击“</span><span lang=EN-US>Build</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”菜单中的“</span><span lang=EN-US>Compile 4-2.cpp</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”命令，并单击“是”按钮确认。系统对</span><span lang=EN-US>4-2.cpp</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>进行编译。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>9</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>编译完成后，单击“</span><span lang=EN-US>Build</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”菜单中的“</span><span lang=EN-US>Build 4-2.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”命令，建立</span><span lang=EN-US>4-2.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>可执行文件。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>操作能否正常进行？如果不行，则可能的原因是什么？</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>步骤</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
楷体_GB2312'>10</span></b></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><b style='mso-bidi-font-weight:normal'><span
style='font-family:楷体_GB2312;mso-ascii-font-family:"Times New Roman"'>：</span></b></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>在工具栏单击“</span><span lang=EN-US>Execute Program</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>”按钮，执行</span><span lang=EN-US>4-2.exe</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>程序。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分析程序</span><span
lang=EN-US>4-2</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的运行结果，可以看到线程</span><span
lang=EN-US> (</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>加和减线程</span><span
lang=EN-US>) </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的交替执行</span><span
lang=EN-US> (</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>因为</span><span
lang=EN-US>Sleep() API</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>允许</span><span
lang=EN-US>Windows</span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>切换线程</span><span
lang=EN-US>) </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。在每次运行之后，数值应该返回初始值</span><span
lang=EN-US> (0) </span></span></span><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span style='font-family:宋体;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，因为在每次运行之后写入线程在等待队列中变成最后一个，内核保证它在其他线程工作时不会再运行。</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>1) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>请描述运行结果</span><span lang=EN-US> (</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>如果运行不成功，则可能的原因是什么？</span><span lang=EN-US>) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>：</span><span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
mso-char-indent-count:2.0;mso-char-indent-size:10.5pt'><span style='mso-bookmark:
_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span lang=EN-US>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='mso-bookmark:_Toc16587483'><span
style='mso-bookmark:_Toc36437031'><span lang=EN-US>2) </span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>根据运行输出结果，对照分析</span><span lang=EN-US>4-2</span></span></span><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>程序，可以看出程序运行的流程吗？请简单描述：</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>____________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='mso-bookmark:_Toc16587483'><span style='mso-bookmark:_Toc36437031'><span
lang=EN-US>________________________________________________________________________</span></span></span></p>

<span style='mso-bookmark:_Toc36437031'></span><span style='mso-bookmark:_Toc16587483'></span>

<p class=MsoNormal><span lang=EN-US>&nbsp;<span style='color:blue'><a
href="#_top"><span style='text-decoration:none;text-underline:none'><!--[if gte vml 1]><v:shape
 id="_x0000_i1028" type="#_x0000_t75" style='width:45pt;height:17.25pt'>
 <v:imagedata src="4-1.files/image003.gif" o:title="02"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=60 height=23
src="4-1.files/image003.gif" v:shapes="_x0000_i1028"><![endif]></span></a></span>
<a href="Bookin.htm"><span style='text-decoration:none;text-underline:none'><!--[if gte vml 1]><v:shape
 id="_x0000_i1029" type="#_x0000_t75" style='width:17.25pt;height:17.25pt'>
 <v:imagedata src="4-1.files/image004.gif" o:title="00"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=23 height=23
src="4-1.files/image005.jpg" v:shapes="_x0000_i1029"><![endif]></span></a></span></p>

</div>

</body>

</html>
